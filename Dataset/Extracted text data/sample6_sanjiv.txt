
I
SANJIV.T.S
IT-B
DBMS CAT- - 3:-
200801075
8)b). Deadlock Handling
Consider the following two transactions and history,
with item X and transaction Ti at site
and item Y and transaction T2 at site 2:
II:
write(x)
write/x)
T2
write (r)
write(Y)
x-lock on x
write (x)
X- lock on Y
write (y)
wait for X lock on X.
wait for x - lock on y
Result: deadlock which cannot be detected locally
at either site
Deadlock Detection:-
In the centralized deadlock- detection approach,
a global wait for graph is constructed and
maintained in a single site; the deadlock-
detection coordinator
. Real graph real, but unknown, state system of the
constructed graph Approximation generated by
E the contolier during the execution of its algorithm
2
.
The global wait-for graph can be constructed
when:
a new edge is inserted in or removed from one
of the local wait - for graphs
A number of changes have occurred in a
local wail-for gaph.
The coordinader needs to invoke cycle - detection
.
If the coordinator finds a cycle, it selects
a rictim and notifies all sites The sites
roll back the victim transaction.
Local and Global Wait-for Graphs
TI
T2
12
T4
LOCAL
T5
T3
T3
site S,
site S2
11
T2
E
T4
Global.
T5
T3
3
Example wait -for Graph for False cycles:-
Initial state:
TV
I1
T3
T2
Si
52
TI
T2
T3
coordinator.
False Cycles:-
.
Suppose that starting from the state shown in
figure
T2 releases resources at S1
resulting in a message remove II
T2
massage from the Transaction Manager at site
S, to the cooridenator
4
2.
And then T2 requests a resource held by T3
at the site S2
resulting in a message insert T2 -> T3 from S2
to the coordinater
3.
Suppose further that the insert message
reaches before the delete message.
O this can happen due to network delays
The coordinator would then find a false
4.
cycle
II T2 T3
TI
5.
The false cycle above neer existed in reality.
6.
False cycles cannot occur if two-phase
locking is used.
Distributed Deadlocks :-
Unnecessary rollbacks may result
when deadlock has indeed occurred and a
victim has been picked, and meanwhile one
of the transactions was aborted for
reasons unrelated to the deadlock
5
.
Due to false cycles in the global wait-for
graph, however, litelihood of false cycles is low.
In the distributed deadlock- detection approach,
sites exchange wait for information and
check for deadlocks
0 Expensive and not used in practice
7)a)
Torrent protoce enables decentralization
of its resources by making use of peer to per
network
A small torrent file is created to represent
a file or a folder to be shared
users can download the required files using
a unique magnet link associated to each
file on torrent
In order to learn the Internet location
of the peer which may be sharing pieces,
the client connects to the trachers named
in the torrent file, achieve a similar
hosh
result through the use of distributed
tables The technology to ensure fault
bolerance is fault- Tollerat services using
deplicated State Machines
6
0
key requirement male a service fault toterart
Eg torrent, lock manager, etc.
.
state machines are a powerful approach to
creating such services
A state machine
O Has a stored state and receive inputs
,
Makes state transitions on each input
and may output some results
.
Transitions and outputs must be determinities
A replicated state machine is a state
mached that is replicated on multiple
modes
All replica must get exactly the same inputs
Replicated log state machine processor only
committed inputs
Even of some nodes fail, state and
output can be obtained from other
nodes
7
client
consensus
I 3
consensus
x 3
Module
Module
y 7
y 73
2
3
2
log
xc2 12621x23 ye4 yez
IE2/2E2 xe3 y41 yer
leader
follower
uses of Replicated State Machines:
.
Inputs can specify operations with parameters,
But operations must be deterministic
Result of operation can be sent from any replica
?
gets executed only when log record is
committed in replicated log.
O
usually sent from leader, which knows which
part of log it is committed.
Eg! Fault tolerant key-value store :-
0
State key -value storage state
operations get () and put are first
logged.
:
operations executed when the log record
is in committed state
c
Even get l ) operations need to be
processed via log
8
Part-B :-
6)b)
Challenges in Maintaining Data consistency :
1)
Data discrepancy occurs when the data in
the target database deriates from the
source database.
The extent to which the data deviates
depends on various factors, some of which
may be included and others unintended
#)
Even using products that replicates data
reliably there remain potential causes of
data discrepancy
If the goal of target databases is to be
strictly consistent with the source database,
then 19 will need to put processes and
policy in place to ensure this outcome
c)
some of the potential causes
Migration Errors:
Different ponds of migration tools are
employed to facilitate the crital load of
the target database before replication
9
can begin. Difference in configuration for
handling data by the migration tools and
replication products can result is data discrepencies
Lift and Shift workload to cloud:
Since the world is moring towards cloud,
the lift and shift of database workload from
on-premises to cloud is the need of todays IT
world.
Difference in source and Target:
Different including, locates - endianner or database
sersions can cause subte discrepencies to
happen during migration and replication
configuration errors:
Improper and unconfiguration of replication products
can cause discrepencies. This type of discrepency
doser't show ap a the replication logs,
since from the replication products perspective
if is forming as configured.
10
user error:
often target databases are treated to offload
query processing from the source database.
Requirements for managing Data Consistency:-
b) High speed, low impact data comparisons
#)
support for heterogeneous database
k)
capability for handling large datas
#).
Minimally intrusive
D) Data Security.
4) MySQL enables restrictions to be placed on
rease of previous passwords To establish
passward-reuse policy globally, use the
password history and password-reuse. - internal
System variables.
2). Database indexing Hash tables may also be
used as disk-based data structures and
database indices although B- trees are more
popular in these applications, hash tables are
commonly used to reduce network traffic
11
3)
Advantages
1. Data Retreivel
2. Editing
Dis Advantages
1. Data Redundancy
2. Data inconsistency.
1)
The mean time is 1000002, 1(22100).
5).
system
Map database, is used because it is designed
efficiently to store and recall spactial information